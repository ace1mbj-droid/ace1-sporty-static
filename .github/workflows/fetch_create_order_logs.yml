name: Fetch create-order logs (temporary)

on:
  workflow_dispatch: {}

jobs:
  logs:
    runs-on: ubuntu-latest
    env:
      SUPABASE_PROJECT_REF: ${{ secrets.SUPABASE_PROJECT_REF }}
      SUPABASE_ACCESS_TOKEN: ${{ secrets.SUPABASE_ACCESS_TOKEN }}
    steps:
      - uses: actions/checkout@v4

      - name: Fetch create-order function logs
        run: |
          set -euo pipefail
          echo "Fetching most recent 200 logs for function: create-order"
          npx supabase functions logs create-order --project-ref "$SUPABASE_PROJECT_REF" --token "$SUPABASE_ACCESS_TOKEN" --limit 200 || true
